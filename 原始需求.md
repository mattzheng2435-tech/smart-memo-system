# 智能备忘录助手 - 用户场景说明书 (Skill + 移动端日报版)

## 1. 产品愿景

我希望这个备忘录不再仅仅是一个死板的命令行工具，而是 Claude Code 的一项"原生技能"。
它应该像一个负责任的秘书，不只是记录，还会主动向我确认缺失的关键信息。
更重要的是，它要充当我的每日任务规划师，即使我的电脑关闭，它也能在每天早上自动整理好我当下需要关注的事情，推送到我的手机上，让我对今天的工作心中有数。

## 2. 核心逻辑：技能与追问 (The Skill & Slot Filling)

### 核心规则

每当识别到用户意图为"创建待办/提醒/备忘"时，助手必须获取以下要素。如果关键信息缺失，必须主动追问：

**What (内容)**：具体要做什么？

**When (时间)**：
- 截止时间 (Due Date)：什么时候必须做完？
- 开始时间 (Start Date)：如果不指定，默认为"现在"。（用于区分"现在就要做"和"下周才开始做"的任务）。

**Who (对象)**：这个任务是为谁做的？

## 3. 核心使用场景 (User Stories)

### 场景一：信息完整的极速记录 (The Happy Path)

**背景**：我正在让 Claude Code 帮我重构代码，突然想起明天要给老板演示。
**动作**：
- 我在对话框直接说：@memo 帮我记一下，明天上午10点要给老板做演示。

**助手分析**：
- 内容：给老板做演示
- 截止时间：明天 10:00
- 开始时间：默认为现在

**期望反馈**：助手回复："✅ 已添加待办：给老板做演示（明天 10:00 截止）"。

### 场景二：信息缺失的主动追问 (Interactive Slot Filling)

**背景**：我随口说了一句任务，没过脑子。
**动作**：
- 我输入：帮我把"更新需求文档"加入待办。

**助手反馈**：
```
好的，关于'更新需求文档'：

期望什么时间完成？

它是现在就开始做，还是这几天先不用管（设置开始时间）？

涉及谁？
```

**我回复**：下周五交，但这周三再开始做，给产品总监的。

**最终结果**：保存任务，且在本周三之前，不要在日报里提醒我这件事。

### 场景三：作为 Claude 的一部分存在 (Seamless Integration)

**交互**：作为 MCP Server 运行，Claude Code 原生调用。

### 场景四：强感知的系统级提醒 (System Notification)

**动作**：到了具体的截止时间点，如果我的电脑开着，电脑弹出原生通知。

### 场景五：智能推测 (Smart Inference)

**背景**：基于上下文推断内容和对象，减少用户输入。

### 场景六：每日移动端早报 (Daily Mobile Briefing) - 云端自动化版

**背景**：每天早上 09:30，无论我的电脑是否开机，我都需要准时收到今天的安排。
**动作**：

**云端触发**：GitHub Actions 定时任务在云端自动运行。

**智能筛选逻辑**：
- 连接云数据库，筛选出所有 status = Pending 的任务。
- 过滤条件：只显示 now() >= start_date 的任务。
- 排序：按截止时间紧急程度排序。

**发送渠道**：我的手机邮箱收到一封邮件。

**内容展示**：
```
📅 今日工作概览

[🔴 紧急] 给老板做演示 (截止：今天 10:00)

[🔵 待办] 更新需求文档 (进度：已到达开始时间)

[⚪ 关注] 3 个任务处于"未开始"状态（暂不列出）
```

### 场景七：模糊语义的极速完成 (Smart Completion)

**背景**：我做完了工作，想告诉助手，但我不想去查任务ID。
**动作**：
- 我直接说：把给老板做演示那个划掉 或者 演示做完了。

**助手逻辑**：
- 搜索数据库中包含"老板"或"演示"且状态为 Pending 的任务。

**情况A (精准命中)**：找到唯一匹配项。直接回复："🎉 太棒了，已标记'给老板做演示'为完成！"

**情况B (歧义)**：找到多项（例如'给老板发邮件'和'给老板做演示'）。回复："你是指'给老板做演示'还是'给老板发邮件'？"

**关键点**：无需输入任何ID，完全依赖自然语言关键词匹配。此操作立即生效。

### 场景八：交互式批量清算 (Interactive Batch Review)

**背景**：一天结束了，或者开完会后，我想快速清理剩下的任务。我希望这个列表是实时的，如果我刚才已经通过对话（场景七）划掉了某个任务，这里就不应该再让我处理一遍。
**动作**：
- 我输入：memo review（或者对 Claude 说"核对一下今天的任务"）。

**逻辑检查**：系统实时查询数据库，严格筛选状态为 Pending 的任务。

**界面展示**：终端显示一个交互式列表（仅展示剩余未完成任务）：
```
[ ] 更新需求文档
[ ] 联系产品总监
```
(注：刚才通过语音划掉的"给老板做演示"不仅已自动消失，而且无需我再次确认)

**操作**：我快速按空格键勾选刚刚做完的事项，然后按回车。

**结果**：一次性批量更新所有勾选任务的状态。

## 4. 数据结构要求 (Data Model)

- id: 唯一标识
- content: 任务内容 (String)
- due_date: 截止时间 (DateTime)
- start_date: 开始/激活时间 (DateTime)
- stakeholder: 利益相关者/对象 (String)
- status: 状态 (Pending/Done)

## 5. 给技术实现的提示 (Technical Specs - Cloud Hybrid Architecture)

为了实现"电脑关机也能发邮件"，我们需要采用 Local CLI + Cloud Database 的架构。

### 数据存储 (Storage)

- 不要使用本地 SQLite。
- 请使用 PostgreSQL。推荐使用 Supabase 或 Neon 的免费层。
- CLI 工具和云端脚本都需要连接这个数据库 URL。

### 自动化邮件 (Automation)

- 生成一个 Python 脚本 daily_report.py，用于查询数据库并发送 SMTP 邮件。
- 生成一个 GitHub Actions Workflow 文件 (.github/workflows/daily_report.yml)。
- 配置 Cron 表达式为 30 1 * * * (UTC 时间对应北京时间 09:30)。
- 提示用户需要在 GitHub 仓库的 Secrets 中配置数据库 URL 和邮箱密码。

### MCP 架构

- 本地运行的 MCP Server 也连接同一个 PostgreSQL 数据库，确保数据实时同步。

### 交互体验

- 模糊匹配和交互式 UI 保持不变。
